<!-- FILTROS -->
<div class="d-flex justify-content-center mt-2 mb-1 mt-sm-5 mb-sm-3">
    <div class="card container w-100 w-md-75 mx-auto shadow p-3">
    <div class="d-flex align-items-center" [ngClass]="{ 'pb-3': filtersVisible }">
        <button
            class="btn btn-link link-underline link-underline-opacity-0 text-secondary py-0 border-0 d-flex align-items-center"
            (click)="toggleFilters()"
        >
            <span class="me-2">{{ filtersVisible ? 'Ocultar filtros' : 'Mostrar filtros' }}</span>
            <i class="bi bi-chevron-down transition-icon" [class.rotate-icon]="filtersVisible"></i>
        </button>
    </div>
    <div [ngClass]="{ 'd-none': !filtersVisible }">
        <div class="row gx-3 gy-3 align-items-end">
            <div class="col-12 col-md-6 col-lg-3">
                <mat-form-field appearance="outline" class="w-100 small-field">
                    <mat-label>Desde</mat-label>
                    <input matInput [matDatepicker]="pickerFrom" [(ngModel)]="dateFrom" (ngModelChange)="applyFilters()">
                    <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
                    <mat-datepicker #pickerFrom></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="col-12 col-md-6 col-lg-3">
                <mat-form-field appearance="outline" class="w-100 small-field">
                    <mat-label>Hasta</mat-label>
                    <input matInput [matDatepicker]="pickerTo" [(ngModel)]="dateTo" (ngModelChange)="applyFilters()">
                    <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
                    <mat-datepicker #pickerTo></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="col-12 col-md-6 col-lg-3">
                <mat-form-field appearance="outline" class="w-100 small-field">
                    <mat-label>Estado</mat-label>
                    <mat-select [(ngModel)]="status" (ngModelChange)="applyFilters()">
                        <mat-option value="">Todos</mat-option>
                        <mat-option value="Asignada">Asignada</mat-option>
                        <mat-option value="Aceptada">Aceptada</mat-option>
                        <mat-option value="Rechazada">Rechazada</mat-option>
                        <mat-option value="En camino">En camino</mat-option>
                        <mat-option value="Recibida">Recibida</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-12 col-md-6 col-lg-3">
                <mat-form-field appearance="outline" class="w-100 small-field">
                    <mat-label>Producto</mat-label>
                    <input matInput type="text" [(ngModel)]="productName" (ngModelChange)="applyFilters()">
                </mat-form-field>
            </div>
        </div>
        <div class="row pt-3">
            <div class="col-12 text-end">
                <button class="btn btn-outline-secondary btn-sm btn-filter" (click)="clearFilters()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="p-0 m-0">
                        <path fill="currentColor"
                            d="M17.127 6.873a1.25 1.25 0 0 1 0 1.768L13.767 12l3.36 3.359a1.25 1.25 0 1 1-1.768 1.768L12 13.767l-3.359 3.36a1.25 1.25 0 1 1-1.768-1.768L10.233 12l-3.36-3.359a1.25 1.25 0 0 1 1.768-1.768L12 10.233l3.359-3.36a1.25 1.25 0 0 1 1.768 0" />
                    </svg>
                    Limpiar
                </button>
            </div>
        </div>
    </div>
</div>
</div>

<!-- TABLA -->
<ui-table
    [title]="title"
    [displayedColumns]="displayedColumns"
    [mobileColumns]="mobileColumns"
    [dataSource]="movements"
    [columnHeaders]="columnHeaders"
    [mobileHeaders]="mobileHeaders"
    [showSelectButton]="true"
    [showFilterButton]="false"
>
</ui-table>